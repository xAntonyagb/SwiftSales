
CREATE TABLE PRODUTO(
    CD_PRODUTO INTEGER(5) PRIMARY KEY,
    DS_PRODUTO VARCHAR(100),
    VL_PRODUTO NUMERIC(10,2),
    QT_ESTOQUE INTEGER(10)
);

CREATE TABLE VENDEDOR (
    CD_VENDEDOR INTEGER(5) PRIMARY KEY,
    NM_VENDEDOR VARCHAR(100)
);

CREATE TABLE NOTAFISCAL (
    NR_NOTAFISCAL INTEGER(10) PRIMARY KEY,
    VL_NOTAFISCAL NUMERIC(10,2),
    DT_EMISSAO DATE,
    NR_CHAVEACESSO VARCHAR(44) UNIQUE,
    CD_VENDEDOR INTEGER(5),
    CD_CLIENTE INTEGER(5),
    CD_FORMAPAGTO VARCHAR(2)
);

CREATE TABLE ITEMNF (
    NR_NOTAFISCAL INTEGER(10),
    CD_PRODUTO INTEGER(5),
    VL_TOTALITEM NUMERIC(10,2),
    VL_DESCONTO NUMERIC(10,2),
    VL_SUBTOTAL NUMERIC(10,2),
    PRIMARY KEY (NR_NOTAFISCAL, CD_PRODUTO)
);

CREATE TABLE CLIENTE (
    CD_CLIENTE INTEGER(5) PRIMARY KEY,
    NM_CLIENTE VARCHAR(100),
    NR_CPF VARCHAR(11),
    DS_EMAIL VARCHAR(100),
    NR_TELEFONE VARCHAR(20)
);

CREATE TABLE CAIXA (
    NR_CAIXA INTEGER(5) PRIMARY KEY,
    VL_INICIAL NUMERIC(10,2),
    VL_FINAL NUMERIC(10,2),
    DT_CAIXA DATE,
    ST_CAIXA VARCHAR(1),
    CD_VENDEDOR INTEGER(5)
);

CREATE TABLE FORMAPAGTO (
    CD_FORMAPAGTO VARCHAR(2) PRIMARY KEY,
    DS_FORMAPAGTO VARCHAR(100)
);
 
ALTER TABLE NOTAFISCAL ADD CONSTRAINT FK_NOTAFISCAL_CD_VENDEDOR
    FOREIGN KEY (CD_VENDEDOR)
    REFERENCES VENDEDOR (CD_VENDEDOR)
    ON DELETE CASCADE;
 
ALTER TABLE NOTAFISCAL ADD CONSTRAINT FK_NOTAFISCAL_CD_CLIENTE
    FOREIGN KEY (CD_CLIENTE)
    REFERENCES CLIENTE (CD_CLIENTE)
    ON DELETE CASCADE;
 
ALTER TABLE NOTAFISCAL ADD CONSTRAINT FK_NOTAFISCAL_CD_FORMAPAGTO
    FOREIGN KEY (CD_FORMAPAGTO)
    REFERENCES FORMAPAGTO (CD_FORMAPAGTO)
    ON DELETE CASCADE;
 
ALTER TABLE ITEMNF ADD CONSTRAINT FK_ITEMNF_CD_PRODUTO
    FOREIGN KEY (CD_PRODUTO)
    REFERENCES PRODUTO(CD_PRODUTO)
    ON DELETE CASCADE;
 
ALTER TABLE ITEMNF ADD CONSTRAINT FK_ITEMNF_NR_NOTAFISCAL
    FOREIGN KEY (NR_NOTAFISCAL)
    REFERENCES NOTAFISCAL (NR_NOTAFISCAL)
    ON DELETE RESTRICT;
 
ALTER TABLE CAIXA ADD CONSTRAINT FK_CAIXA_CD_VENDEDOR
    FOREIGN KEY (CD_VENDEDOR)
    REFERENCES VENDEDOR (CD_VENDEDOR)
    ON DELETE CASCADE;